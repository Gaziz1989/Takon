<style src="./style.css" scoped></style>
<template>
  <v-toolbar fixed flat class="header">
      <router-link to="/">
        <v-toolbar-title></v-toolbar-title>
      </router-link>
      <v-spacer></v-spacer>
      <div class="meeting">
        Здравствуйте, <p>{{this.$auth.currentUser().name ? this.$auth.currentUser().name : this.$auth.currentUser().email.split('@')[0]}}</p>
        <span>онлайн</span>
      </div>
  </v-toolbar>
</template>

<script>
// import UsersService from '@/services/UsersService'
export default {
  data () {
    return {
      notifications: []
    }
  },
  async beforeMount () {
    await this.$socket.emit('getnotifications', (_notifications) => {
      this.notifications = _notifications
    })
  },
  methods: {
    logout () {
      this.$auth.logout()
      this.$router.push({
        name: 'Hello'
      })
      window.location.reload()
    }
  },
  sockets: {
    notificationAdded (_notifications) {
      this.notifications = _notifications
      console.log(this.notifications)
    }
  }
}
</script>
